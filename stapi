import requests
import json

seasonSearchUrl = 'http://stapi.co/api/v1/rest/season/search'
seasonQueryUrl = 'http://stapi.co/api/v1/rest/season?uid='

r = requests.get(seasonSearchUrl)
# r.encoding = 'UTF-8'
rJson = r.text
print('RAW URL:= ' + r.url)
print('RAW RESPONSE:= ' + str(r.status_code))
# print('RAW TEXT:= ' + str(rJson))
rJson_dict = json.loads(rJson)
print(json.dumps(rJson_dict, indent=4, sort_keys=True))

# print(rJson_dict['seasons'][0]['series']['title'])

seasonsArray = rJson_dict['seasons']

for x in seasonsArray:
    print(x['series']['title'] + ", Season " + str(x['seasonNumber']))
    seasonUid = x['uid']
    # print(seasonUid)
    # print(requests.get(seasonQueryUrl + seasonUid).url)
    getSeasons = requests.get(seasonQueryUrl + seasonUid).text
    season_dict = json.loads(getSeasons)
    episodesArray = season_dict['season']['episodes']
    # print(episodesArray)
    for y in episodesArray:
        print(y['title'])
